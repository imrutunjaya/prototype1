<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Advanced Notes App - Topics & Full Notes</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0;
    height: 100%;
    font-family: 'Inter', sans-serif;
    background: #fff;
    color: #000;
    display: flex;
    flex-direction: column;
  }
  main {
    flex: 1;
    display: flex;
    height: 100%;
    overflow: hidden;
    position: relative;
  }
  /* Topics panel */
  #topics-panel {
    min-width: 300px;
    max-width: 400px;
    border-right: 1px solid #ddd;
    background: #f7f7f7;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
  }
  #topics-header {
    font-weight: 600;
    font-size: 1.3rem;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #ddd;
    user-select: none;
    width: 100%;
    box-sizing: border-box;
  }
  #topics-list {
    list-style: none;
    padding: 0;
    margin: 0;
    flex-grow: 1;
    width: 100%;
  }
  #topics-list li button {
    width: 100%;
    padding: 1rem 1.5rem;
    border: none;
    background: #fff;
    border-bottom: 1px solid #ddd;
    color: #000;
    font-size: 1.1rem;
    text-align: left;
    cursor: pointer;
    transition: background-color 0.25s ease;
    box-sizing: border-box;
  }
  #topics-list li button:hover,
  #topics-list li button.active {
    background-color: #e0e0e0;
    font-weight: 600;
  }
  /* Full note view panel */
  #note-panel {
    flex-grow: 1;
    padding: 2rem 2.5rem;
    background: #fff;
    overflow-y: auto;
    display: none;
    flex-direction: column;
    width: 100%;
    box-sizing: border-box;
  }
  #note-header {
    display: flex;
    align-items: center;
    margin-bottom: 1.5rem;
  }
  #back-button {
    background: #000;
    border: none;
    color: #fff;
    padding: 0.5rem 0.9rem;
    font-size: 1.7rem;
    font-weight: 700;
    line-height: 1;
    cursor: pointer;
    border-radius: 8px;
    user-select: none;
    margin-right: 1.25rem;
    transition: background-color 0.25s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.2);
  }
  #back-button:hover {
    background-color: #222;
  }
  #note-title {
    font-weight: 700;
    font-size: 2.2rem;
    user-select: text;
    flex: 1;
  }
  #note-subject {
    font-style: italic;
    margin-top: 0.3rem;
    color: #555;
    font-size: 0.95rem;
    user-select: text;
  }
  #note-content {
    margin-top: 1.5rem;
    white-space: pre-wrap;
    font-size: 1.1rem;
    line-height: 1.6;
    user-select: text;
    max-width: 900px;
  }
  #note-empty-message {
    font-size: 1.1rem;
    line-height: 1.5;
    color: #666;
    margin-top: 1rem;
  }
  /* Bottom nav for subjects + search */
  nav#bottom-nav {
    height: 56px;
    background: #f7f7f7;
    border-top: 1px solid #ddd;
    display: flex;
    align-items: center;
    font-weight: 600;
    user-select: none;
    position: relative;
    overflow-x: auto;
    /* Allow horizontal scroll for small width */
  }
  nav#bottom-nav::-webkit-scrollbar {
    height: 6px;
  }
  nav#bottom-nav::-webkit-scrollbar-thumb {
    background: rgba(0,0,0,0.15);
    border-radius: 3px;
  }
  nav#bottom-nav::-webkit-scrollbar-track {
    background: transparent;
  }
  nav#bottom-nav button.subject-btn,
  nav#bottom-nav button#search-btn {
    background: #fff;
    border: none;
    margin: 0 6px;
    padding: 0.5rem 1.2rem;
    border-radius: 6px;
    cursor: pointer;
    color: #000;
    font-weight: 600;
    font-size: 1rem;
    white-space: nowrap;
    flex-shrink: 0;
    transition: background-color 0.25s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  nav#bottom-nav button.subject-btn.active,
  nav#bottom-nav button.subject-btn[aria-pressed="true"] {
    background-color: #000;
    color: #fff;
    cursor: default;
  }
  nav#bottom-nav button.subject-btn:hover:not(.active),
  nav#bottom-nav button#search-btn:hover {
    background-color: #ddd;
  }
  nav#bottom-nav button#search-btn svg {
    width: 20px;
    height: 20px;
    fill: #000;
  }
  /* Search overlay */
  #search-overlay {
    position: fixed;
    top: 0; left: 0; bottom: 0; right: 0;
    background: rgba(0,0,0,0.55);
    display: none;
    flex-direction: column;
    align-items: center;
    padding: 2rem 1rem;
    z-index: 9999;
  }
  #search-box {
    background: #fff;
    border-radius: 8px;
    width: 100%;
    max-width: 650px;
    padding: 1rem 1.5rem;
    box-shadow: 0 2px 12px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    max-height: 80vh;
  }
  #search-input {
    font-size: 1.15rem;
    padding: 0.7rem 1rem;
    border: 1px solid #ccc;
    border-radius: 6px;
    outline-offset: 2px;
  }
  #search-results {
    margin-top: 1rem;
    list-style: none;
    padding: 0;
    overflow-y: auto;
    flex-grow: 1;
    max-height: 50vh;
  }
  #search-results li {
    border-bottom: 1px solid #ddd;
  }
  #search-results li button {
    background: #fff;
    border: none;
    width: 100%;
    text-align: left;
    padding: 0.7rem 1rem;
    font-size: 1rem;
    color: #000;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }
  #search-results li button:hover {
    background-color: #e0e0e0;
  }
  #search-close-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: #333;
    font-weight: 600;
    align-self: flex-end;
    cursor: pointer;
    margin-top: 0.3rem;
  }
  #search-close-btn:hover {
    color: #000;
  }
  /* Responsive adjustments */
  @media (max-width: 720px) {
    main {
      flex-direction: column;
    }
    #topics-panel {
      width: 100%;
      max-width: none;
      height: 180px;
      border-right: none;
      border-bottom: 1px solid #ddd;
      overflow-x: auto;
      overflow-y: hidden;
      flex-shrink: 0;
      flex-direction: row;
    }
    #topics-header {
      flex-shrink: 0;
      font-size: 1rem;
      padding: 1rem 1.5rem 0.5rem 1rem;
      border-bottom: none;
      white-space: nowrap;
      align-self: center;
      user-select: none;
      width: auto;
    }
    #topics-list {
      display: flex;
      margin: 0 1rem;
      overflow-x: auto;
      overflow-y: hidden;
      padding: 0;
      flex-grow: 1;
      width: auto;
    }
    #topics-list li {
      flex-shrink: 0;
      border: none;
      margin-right: 12px;
      width: auto;
    }
    #topics-list li button {
      border-radius: 6px;
      padding: 0.55rem 1rem;
      box-shadow: 0 1px 3px rgb(0 0 0 / 0.1);
      white-space: nowrap;
      border-bottom: none;
      width: auto;
      font-size: 1rem;
    }
    #note-panel {
      padding: 1rem 1rem 2rem 1rem;
      height: calc(100vh - 180px - 56px);
      overflow-y: auto;
      width: 100%;
      max-width: none;
    }
    #note-header {
      margin-bottom: 1rem;
      padding-left: 0.5rem;
    }
  }
</style>
</head>
<body>
<main>

  <!-- Topics panel -->
  <section id="topics-panel" aria-label="Topics List">
    <div id="topics-header" tabindex="0" aria-live="polite">Select a subject to view topics</div>
    <ul id="topics-list" tabindex="0" aria-label="Topic list"></ul>
  </section>

  <!-- Full note view panel -->
  <section id="note-panel" aria-label="Full Note Display" style="display:none;">
    <div id="note-header">
      <button id="back-button" aria-label="Go back to topic list" title="Back to topics">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>
      </button>
      <div>
        <div id="note-title"></div>
        <div id="note-subject" style="font-style:italic; color:#555; font-size:0.95rem;"></div>
      </div>
    </div>
    <div id="note-content" role="region" aria-live="polite" aria-atomic="true">
      <div id="note-empty-message">Select a topic to view its notes.</div>
    </div>
  </section>

</main>

<!-- Bottom nav for subjects + search -->
<nav id="bottom-nav" role="navigation" aria-label="Subject navigation"></nav>

<!-- Search overlay -->
<div id="search-overlay" role="dialog" aria-modal="true" aria-labelledby="search-input" tabindex="-1">
  <div id="search-box">
    <button id="search-close-btn" aria-label="Close search">&times;</button>
    <input type="search" id="search-input" placeholder="Search topics..." aria-describedby="search-desc" autocomplete="off" />
    <div id="search-desc" style="font-size:0.85rem; color:#555; margin-top: 4px;">Type to search topics across all subjects</div>
    <ul id="search-results" aria-label="Search results" tabindex="0"></ul>
  </div>
</div>

<script>
  (function(){
    let notesData = {
      "Math": {
        "Algebra": "Algebra is the study of mathematical symbols and the rules for manipulating these symbols. Includes operations like solving equations.",
        "Geometry": "Geometry deals with the properties and relations of points, lines, surfaces, and solids.",
        "Calculus": "Calculus involves the study of change, in the form of differentiation and integration."
      },
      "English": {
        "Grammar": "Grammar is the set of structural rules governing the composition of clauses, phrases, and words in English.",
        "Literature": "Literature includes written works such as poems, plays, novels, and essays.",
        "Vocabulary": "Vocabulary represents the words known and used within a language."
      },
      "General Knowledge": {
        "World Capitals": "A list of important capitals around the world, e.g. Washington D.C. (USA), Tokyo (Japan), Paris (France).",
        "Famous Personalities": "Details about influential people in history and contemporary times."
      },
      "Computer": {
        "Programming Basics": "Programming involves writing instructions for computers using languages like Python, JavaScript, and C++.",
        "Data Structures": "Data structures organize and store data efficiently, examples: arrays, linked lists, trees, and graphs."
      },
      "Formula": {
        "Physics Formulas": "Physics formulas include E=mcÂ², F=ma, and formulas for velocity, acceleration, and more.",
        "Math Formulas": "Common math formulas like quadratic formula, area of circle, Pythagorean theorem."
      },
      "Tricks": {
        "Math Tricks": "Math tricks help quickly solve problems, for example multiplying by 11, squaring numbers ending with 5.",
        "Memory Tricks": "Techniques to improve memory such as mnemonics, visualization, and chunking."
      }
    };

    let currentSubject = null;
    let currentTopic = null;

    const bottomNav = document.getElementById('bottom-nav');
    const topicsHeader = document.getElementById('topics-header');
    const topicsList = document.getElementById('topics-list');
    const notePanel = document.getElementById('note-panel');
    const noteHeader = document.getElementById('note-header');
    const noteTitle = document.getElementById('note-title');
    const noteSubject = document.getElementById('note-subject');
    const noteContent = document.getElementById('note-content');
    const backButton = document.getElementById('back-button');
    const noteEmptyMessage = document.getElementById('note-empty-message');

    const searchOverlay = document.getElementById('search-overlay');
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('search-results');
    const searchCloseBtn = document.getElementById('search-close-btn');

    function renderSubjects(subjects) {
      bottomNav.innerHTML = '';
      subjects.forEach(subject => {
        const btn = document.createElement('button');
        btn.textContent = subject;
        btn.type = 'button';
        btn.classList.add('subject-btn');
        btn.setAttribute('aria-pressed', 'false');
        btn.addEventListener('click', () => {
          if (currentSubject !== subject) {
            selectSubject(subject);
          }
        });
        bottomNav.appendChild(btn);
      });
      // Search icon minimal black svg
      const searchBtn = document.createElement('button');
      searchBtn.id = 'search-btn';
      searchBtn.setAttribute('aria-label', 'Open search topics');
      searchBtn.title = 'Search topics';
      searchBtn.innerHTML = `
        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" 
          viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          width="20" height="20">
          <circle cx="11" cy="11" r="7"/>
          <line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>`;
      searchBtn.addEventListener('click', openSearchOverlay);
      bottomNav.appendChild(searchBtn);
    }

    function updateSubjectNavActive() {
      const buttons = bottomNav.querySelectorAll('button.subject-btn');
      buttons.forEach(btn => {
        if (btn.textContent === currentSubject) {
          btn.classList.add('active');
          btn.setAttribute('aria-pressed', 'true');
        } else {
          btn.classList.remove('active');
          btn.setAttribute('aria-pressed', 'false');
        }
      });
    }

    function renderTopics() {
      topicsList.innerHTML = '';
      if (!currentSubject || !notesData) {
        topicsHeader.textContent = 'Select a subject to view topics';
        hideNotePanel();
        return;
      }
      const subjTopics = notesData[currentSubject];
      if (!subjTopics) {
        topicsHeader.textContent = `No data found for subject: ${currentSubject}`;
        hideNotePanel();
        return;
      }
      topicsHeader.textContent = `Topics in ${currentSubject}`;
      const topics = Object.keys(subjTopics).sort();
      if (topics.length === 0) {
        const li = document.createElement('li');
        li.textContent = 'No topics available.';
        topicsList.appendChild(li);
        hideNotePanel();
        return;
      }
      topics.forEach(topic => {
        const li = document.createElement('li');
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = topic;
        btn.setAttribute('aria-pressed', 'false');
        btn.addEventListener('click', () => {
          openNoteView(topic);
        });
        li.appendChild(btn);
        topicsList.appendChild(li);
      });
      showTopicsPanel();
      hideNotePanel();
    }

    function openNoteView(topic) {
      currentTopic = topic;
      const noteText = notesData[currentSubject][topic] || '(No notes available)';
      noteTitle.textContent = topic;
      noteSubject.textContent = currentSubject;
      noteEmptyMessage.style.display = 'none';
      noteContent.textContent = noteText;
      notePanel.style.display = 'flex';
      backButton.focus();
      hideTopicsPanel();
    }

    backButton.addEventListener('click', () => {
      currentTopic = null;
      showTopicsPanel();
      hideNotePanel();
    });

    function showTopicsPanel() {
      document.getElementById('topics-panel').style.display = 'flex';
    }
    function hideTopicsPanel() {
      document.getElementById('topics-panel').style.display = 'none';
    }
    function hideNotePanel() {
      notePanel.style.display = 'none';
      noteEmptyMessage.style.display = 'block';
      noteTitle.textContent = '';
      noteSubject.textContent = '';
      noteContent.textContent = '';
    }

    function clearNoteView() {
      currentTopic = null;
      hideNotePanel();
      showTopicsPanel();
    }

    function selectSubject(subject) {
      currentSubject = subject;
      currentTopic = null;
      updateSubjectNavActive();
      renderTopics();
      clearNoteView();
    }

    function openSearchOverlay() {
      searchOverlay.style.display = 'flex';
      searchInput.value = '';
      searchResults.innerHTML = '';
      searchOverlay.focus();
      searchInput.focus();
      document.body.style.overflow = 'hidden';
    }
    function closeSearchOverlay() {
      searchOverlay.style.display = 'none';
      document.body.style.overflow = '';
      searchInput.value = '';
      searchResults.innerHTML = '';
    }
    searchCloseBtn.addEventListener('click', closeSearchOverlay);
    searchOverlay.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        closeSearchOverlay();
      }
    });

    let searchTimeout = null;
    searchInput.addEventListener('input', () => {
      if (searchTimeout) clearTimeout(searchTimeout);
      searchTimeout = setTimeout(runSearch, 250);
    });

    function escapeHtml(text) {
      return text.replace(/[&<>"']/g, m => ({
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;'
      }[m]));
    }

    function runSearch() {
      const query = searchInput.value.trim().toLowerCase();
      searchResults.innerHTML = '';
      if (!query) return;
      const matches = [];
      for (const subject in notesData) {
        if (!notesData.hasOwnProperty(subject)) continue;
        for (const topic in notesData[subject]) {
          if (!notesData[subject].hasOwnProperty(topic)) continue;
          if (topic.toLowerCase().includes(query) ||
              notesData[subject][topic].toLowerCase().includes(query)) {
            matches.push({subject, topic});
          }
        }
      }
      if (matches.length === 0) {
        const li = document.createElement('li');
        li.textContent = 'No results found.';
        searchResults.appendChild(li);
        return;
      }
      matches.forEach(match => {
        const li = document.createElement('li');
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.innerHTML = `<strong>${escapeHtml(match.topic)}</strong> <small style="color:#666;">in ${escapeHtml(match.subject)}</small>`;
        btn.addEventListener('click', () => {
          closeSearchOverlay();
          selectSubject(match.subject);
          setTimeout(() => openNoteView(match.topic), 100);
        });
        li.appendChild(btn);
        searchResults.appendChild(li);
      });
    }

    window.addEventListener('keydown', e => {
      if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
        e.preventDefault();
        openSearchOverlay();
      }
    });

    function init() {
      renderSubjects(Object.keys(notesData));
    }
    init();
  })();
</script>
</body>
</html>

